<html>
	<head>
		<script type="text/javascript">
origin = "";

function changeState(e)
{

	document.getElementById("text").innerHTML = e.value;

	URIText = e.value;

	URIText = escape(URIText);

	link = origin + "/#" + URIText;
	document.getElementById("textlink").href=link;
	document.getElementById("textlink").style.display="Block";
	window.history.pushState("cat", e.value, link);

	return false;
}

function readURI()
{
	if(location.href.indexOf("#") != -1)
	{
		displayText = location.href.substr(location.href.indexOf("#")+1);

		displayText = unescape(displayText);

		document.getElementById("text").innerHTML = displayText;

		origin = location.href.substr(0,location.href.indexOf("#"));
		if(origin.charAt(origin.length-1) == "/")
			origin = origin.substr(0,origin.length-1);
	}
	else
	{
		document.getElementById("textlink").style.display="none";
		origin = location.href;
		if(origin.charAt(origin.length-1) == "/")
			origin = origin.substr(0,origin.length-1);
	}
}

		</script>
	</head>

	<body onload="readURI();">

		<div id="text">test</div>
		</br>
		<a id="textlink" href="">link me</a>

		<form name="newTextForm" onsubmit="return changeState(this.newText);" >
			<input type="text" name="newText" />
			<input type="submit" value="Submit" />
		</form>

	</body>
</head>
